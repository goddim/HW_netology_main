# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/virt-11/additional).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.
## ОТВЕТ

--Электронные чеки в JSON-виде--
NoSQL базы данных, такие как MongoDB. Эти базы данных хорошо подходят для хранения неструктурированных или полуструктурированных данных, таких как JSON-документы, что делает их подходящими для хранения электронных чеков.

--Склады и автомобильные дороги для логистической компании--
Реляционные базы данных, такие как PostgreSQL или MySQL. Они позволяют организовать структурированные данные с использованием таблиц, что подходит для информации о складах, дорогах и других логистических данных.

--Генеалогические деревья--
Графовые базы данных, такие как Neo4j. Они  моделируют связи между узлами и их отношениями, что позволяет эффективно работать с такими сложными структурами данных.

--Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации--
Для кэширования с ограниченным временем жизни, можно воспользоваться in-memory базами данных, например, Redis. Redis предоставляет высокую производительность и позволяет хранить данные в памяти с возможностью установки таймеров жизни для ключей, что идеально подходит для кэширования данных аутентификации.

--Отношения клиент-покупка для интернет-магазина--
Реляционные базы данных такие как PostgreSQL, MySQL или другие, предоставляют надежные механизмы для работы с отношениями между сущностями. Они могут эффективно хранить данные о клиентах и их покупках в виде таблиц, что позволяет легко управлять связями и выполнять сложные запросы.

## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?
## ОТВЕТ
Классификация согласно CAP-теореме:

1. Данные записываются на все узлы с задержкой до часа (асинхронная запись):

Система обеспечивает доступность и устойчивость к разделению, так как данные записываются на все узлы, позволяя системе продолжать работать даже при разделении сети.
Однако, из-за асинхронной записи возможно нарушение согласованности данных, что делает систему склонной к выбору доступности перед согласованностью.
CAP-классификация: AP (Availability, Partition tolerance)

2. При сетевых сбоях система может разделиться на 2 раздельных кластера:

Система, при разделении на два кластера, склонна сохранять согласованность данных за счет ограничения доступности к данным в случае разделения сети.
Это приводит к выбору согласованности перед доступностью.
CAP-классификация: CP (Consistency, Partition tolerance)

3. Система может не прислать корректный ответ или сбросить соединение:

Система может быть настроена на соблюдение согласованности, отказываясь от доступности в случае, когда не может гарантировать корректные данные.
Это указывает на выбор согласованности перед доступностью.
CAP-классификация: CP (Consistency, Partition tolerance)


Классификация согласно PACELC-теореме:
1. Данные записываются на все узлы с задержкой до часа (асинхронная запись):

P - Система устойчива к разделению, так как данные записываются на все узлы, что позволяет системе продолжать работу при разделении сети.
A - Высокая доступность, так как система готова принимать запросы даже при задержке записи.
C - Не всегда гарантируется согласованность, из-за асинхронной записи данных.
E - Возможно, эвристическое отклонение от строгой согласованности в пользу доступности.
L - Задержка до часа может повлиять на отклонение от строгой согласованности в пользу доступности и устойчивости.
PACELC-классификация: PA/EL (Partition tolerance, Availability/Else, Latency)

2. При сетевых сбоях система может разделиться на 2 раздельных кластера:

P - Система устойчива к разделению, так как может продолжать работать, даже если разделена на кластеры.
A - Доступность может быть снижена в случае разделения на кластеры, что приводит к устойчивости к разделению за счет ограничения доступности.
C - Система склонна к соблюдению согласованности за счет ограничения доступности в случае разделения.
E - Возможно, эвристическое отклонение от строгой согласованности в пользу доступности.
L - Возможно, эвристическое отклонение от строгой согласованности из-за разделения кластеров.
PACELC-классификация: PC/EL (Partition tolerance, Consistency, Else/Latency)

3. Система может не прислать корректный ответ или сбросить соединение:

P - Устойчивость к разделению поддерживается, так как система продолжает работать при недоступности.
A - Низкая доступность, так как система может сбросить соединение или не прислать корректный ответ.
C - Система склонна к соблюдению согласованности за счет отказа от доступности в случае, когда не может гарантировать корректные данные.
E - Возможно, эвристическое отклонение от строгой согласованности в пользу доступности.
L - Эвристическое отклонение от строгой согласованности может быть обусловлено задержкой или другими факторами.
PACELC-классификация: PC/EL (Partition tolerance, Consistency, Else/Latency)

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

## ОТВЕТ
Эти принципы описывают различные подходы к управлению данными, и в большинстве случаев системы реализуют или следуют принципам ACID, или принципам BASE. В одной системе трудно реализовать идеологии ACID и BASE одновременно, поскольку они ориентированы на разные ценности - строгую согласованность данных (ACID) и доступность/масштабируемость (BASE).

В реальном мире, системы могут комбинировать аспекты ACID и BASE в зависимости от конкретных потребностей. Например, некоторые части системы могут следовать принципам ACID для хранения критически важных данных, в то время как другие части могут использовать базы данных, обеспечивающие более высокую доступность и масштабируемость на основе принципов BASE для менее критичных данных. Это позволяет системе достигать баланса между согласованностью и доступностью в зависимости от конкретной ситуации

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?
## ОТВЕТ 

Скорее всего речь идет о Redis - ключевое хранилище данных, которое также поддерживает механизм Pub/Sub.

У Redis есть некоторые минусы, которые нужно учитывать:

- Ограниченные возможности масштабирования: Redis, хотя и обладает высокой производительностью, имеет ограничения на масштабирование по размеру одного сервера.

- Жесткие требования к памяти: Redis хранит все данные в памяти, что может привести к ограничениям по объему данных из-за ограниченной доступной памяти на сервере.

- Отсутствие встроенной поддержки для постоянного хранения данных на диск: Хотя Redis поддерживает снимки данных для сохранения на диск, он не предоставляет полноценной поддержки постоянного хранения данных на диске с использованием журналирования, как это делают некоторые другие СУБД.

- Возможные проблемы с консистентностью в распределенной среде: В распределенных окружениях Redis может иметь некоторые ограничения в поддержании строгой консистентности из-за асинхронной репликации данных между узлами.

